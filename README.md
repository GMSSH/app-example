
# åº”ç”¨ç›®å½•ä»“åº“è§„èŒƒ

å‰åç«¯åº”ç”¨ç»Ÿä¸€å­˜æ”¾äºåŒä¸€ä¸ªä»“åº“ä¸­ï¼Œæœ¬æ–‡æ¡£å®šä¹‰äº†ç›®å½•ç»“æ„ã€æ„å»ºæµç¨‹ã€äº§ç‰©ç»„ç»‡åŠéƒ¨ç½²è§„èŒƒï¼Œé€‚ç”¨äº GM ç³»ç»Ÿä¸€ä½“åŒ–ç®¡ç†æµç¨‹ã€‚

## ğŸ“ ä»“åº“ç›®å½•ç»“æ„

```text
app/
â”œâ”€â”€ web/             # å‰ç«¯åº”ç”¨ç›®å½•
â”‚   â””â”€â”€ build.sh     # å‰ç«¯æ„å»ºè„šæœ¬
â”œâ”€â”€ backend/         # åç«¯åº”ç”¨ç›®å½•
â”‚   â””â”€â”€ build.sh     # åç«¯æ„å»ºè„šæœ¬
â”œâ”€â”€ Makefile         # æ ¹æ„å»ºè„šæœ¬
â”œâ”€â”€ dist/            # æ„å»ºäº§ç‰©è¾“å‡ºç›®å½•
â”œâ”€â”€ README.md        # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ VERSION          # é¡¹ç›®ç‰ˆæœ¬å·ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ CHANGELOG        # é¡¹ç›®å˜æ›´æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ LICENSE.txt      # å¼€æºåè®®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ .gitignore       # Git å¿½ç•¥è§„åˆ™ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ install.sh       # åº”ç”¨å®‰è£…è„šæœ¬ï¼ˆå¯é€‰ï¼‰
```

## âš™ï¸ æ„å»ºè¦æ±‚

- `web/` ç›®å½•å¿…é¡»å­˜åœ¨ `build.sh`ï¼Œç”¨äºå‰ç«¯æ„å»º
- `backend/` ç›®å½•å¿…é¡»å­˜åœ¨ `build.sh`ï¼Œç”¨äºåç«¯æ„å»º
- æ ¹ç›®å½• `Makefile` ç”¨äºç»Ÿä¸€è°ƒåº¦å‰åç«¯æ„å»ºæµç¨‹

## ğŸ§± Makefile æ¨¡æ¿

```makefile
# é¡¹ç›®æ„å»ºMakefile

# å®šä¹‰æ„å»ºç›®æ ‡ç›®å½•
DIST_DIR := dist

# é»˜è®¤ç›®æ ‡ï¼šæ‰§è¡Œå®Œæ•´æ„å»º
all: build-web build-backend

build-web:
	@echo "å¼€å§‹æ„å»ºå‰ç«¯åº”ç”¨..."
	@chmod +x web/build.sh
	@cd web && ./build.sh
	@echo "å‰ç«¯åº”ç”¨æ„å»ºå®Œæˆ!"

# æ„å»ºåç«¯åº”ç”¨
build-backend:
	@echo "å¼€å§‹æ„å»ºåç«¯åº”ç”¨..."
	@chmod +x backend/build.sh
	@cd backend && ./build.sh
	@echo "åç«¯åº”ç”¨æ„å»ºå®Œæˆ!"

# æ¸…ç†æ„å»ºç»“æœ
clean:
	@echo "æ¸…ç†æ„å»ºç»“æœ..."
	@rm -rf $(DIST_DIR)
	@cd web && ./build.sh clean
	@cd backend && ./build.sh clean
	@echo "æ¸…ç†å®Œæˆ!"

# å¸®åŠ©ä¿¡æ¯
help:
	@echo "å¯ç”¨å‘½ä»¤:"
	@echo "  make all       - æ„å»ºå‰ç«¯å’Œåç«¯åº”ç”¨"
	@echo "  make build-web - ä»…æ„å»ºå‰ç«¯åº”ç”¨"
	@echo "  make build-backend - ä»…æ„å»ºåç«¯åº”ç”¨"
	@echo "  make clean     - æ¸…ç†æ„å»ºç»“æœ"
	@echo "  make help      - æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯"

.PHONY: all build-web build-backend clean help
```

## ğŸ› ï¸ æ„å»ºæŒ‡ä»¤

```bash
# æ„å»ºå‰åç«¯
make all

# æ„å»ºå‰ç«¯
make build-web

# æ„å»ºåç«¯
make build-backend

# æ¸…ç†æ„å»ºç›®å½•
make clean
```

## ğŸ“¦ æ„å»ºäº§ç‰©ç»“æ„

æ‰§è¡Œ `make all` åç”Ÿæˆç»“æ„ï¼š

```text
dist/
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ static/
â”‚   â””â”€â”€ icon.png
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main
â”‚   â””â”€â”€ install.sh
```

### åˆ¶å“å‘å¸ƒè·¯å¾„æ˜ å°„

| æ„å»ºäº§ç‰©è·¯å¾„      | åˆ¶å“å‘å¸ƒé¡¹ç›®è·¯å¾„           |
|-------------------|--------------------|
| `dist/web/`       | `example/app/www/` |
| `dist/backend/`   | `example/app/bin/` |

### åˆ¶å“é¡¹ç›®ç»“æ„ç¤ºä¾‹è§„èŒƒ

```text
example/
â”œâ”€â”€ tmp/                    # ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ cache/                  # ç¼“å­˜ç›®å½•ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ data/                   # åº”ç”¨æ•°æ®ç›®å½•ï¼ˆå¿…é¡»ï¼‰
â”‚   â””â”€â”€ config.yaml         # åº”ç”¨é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ app/                    # åº”ç”¨ä¸»ç›®å½•ï¼ˆå¿…é¡»ï¼‰
â”‚   â”œâ”€â”€ www/                # å‰ç«¯èµ„æºï¼ˆå¿…é¡»ï¼‰
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â””â”€â”€ icon.png
â”‚   â”œâ”€â”€ bin/                # åç«¯ç¨‹åºï¼ˆå¿…é¡»ï¼‰
â”‚   â”‚   â”œâ”€â”€ main
â”‚   â”‚   â””â”€â”€ install.sh
â”‚   â””â”€â”€ app.json            # åº”ç”¨å…ƒä¿¡æ¯æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰
```

## ğŸ§¾ app.json å…ƒä¿¡æ¯è§„èŒƒ

```json
{
  "name": "official/example",
  "title": "ç¤ºä¾‹åº”ç”¨",
  "icon": "./icon.png",
  "version": "1.0.0",
  "sys_req": ["centos", "ubuntu"],
  "app_req": ["nginx", "redis"],
  "conflict": ["old-webhook"],
  "icon_menu": [
    {
      "name": "æ‰“å¼€æ‰€åœ¨æ–‡ä»¶å¤¹",
      "icon": "./open.png",
      "call_func": "openWithPath"
    }
  ]
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | å¿…å¡« | ç¤ºä¾‹ | æè¿° |
|--------|------|------|------|------|
| name | string | âœ… | "xiaoming/webhook" | åº”ç”¨å”¯ä¸€æ ‡è¯†ï¼ˆå»ºè®®åŠ ç»„ç»‡å‰ç¼€ï¼‰ |
| title | string | âœ… | "Webhook ç®¡ç†å™¨" | åº”ç”¨æ˜¾ç¤ºåç§° |
| icon | string | âœ… | "./icon.png" | å›¾æ ‡è·¯å¾„ï¼ˆå»ºè®®64x64 PNG/SVGï¼‰ |
| version | string | âœ… | "1.0.0" | è¯­ä¹‰åŒ–ç‰ˆæœ¬å· |
| sys_req | string[] | å¦ | ["centos"] | ç³»ç»Ÿä¾èµ–è¦æ±‚ |
| app_req | string[] | å¦ | ["nginx"] | åº”ç”¨ä¾èµ–è¦æ±‚ |
| conflict | string[] | å¦ | ["old-webhook"] | å†²çªåº”ç”¨åˆ—è¡¨ |
| icon_menu | object[] | å¦ | - | è‡ªå®šä¹‰å¿«æ·èœå• |

## ğŸ§© icon_menu ç¤ºä¾‹

```json
{
  "name": "æ‰“å¼€æ‰€åœ¨æ–‡ä»¶å¤¹",
  "icon": "./open.png",
  "call_func": "openWithPath"
}
```